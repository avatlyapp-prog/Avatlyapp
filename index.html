<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Avatly ‚Äì Guardaroba & Outfit</title>
  <meta name="theme-color" content="#5A2732"/>
  <link rel="manifest" href="manifest.webmanifest"/>
  <link rel="stylesheet" href="styles.css"/>

  <!-- Icone per browser / iOS -->
  <link rel="icon" href="icon-192.png" type="image/png">
  <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
  <!-- Splash iniziale: rosa con scritta bordeaux -->
  <div id="introSplash" class="intro-splash">
    <div class="intro-logo">Avatly</div>
  </div>

  <!-- Login / Onboarding -->
  <section id="splash" class="center full">
    <div class="logo">Avatly</div>
    <div class="card login">
      <h2>Accedi</h2>
      <button class="btn ghost" id="loginApple">Ô£ø Continua con Apple (demo)</button>
      <button class="btn ghost" id="loginGoogle">Continue with Google (demo)</button>
      <div class="or">oppure</div>
      <input id="email" placeholder="Email"/>
      <input id="password" placeholder="Password" type="password"/>
      <button class="btn primary" id="loginEmail">Accedi</button>
      <p class="small muted">* Login demo locale. In v1.0 collegheremo Apple/Google reali e salvataggio cloud.</p>
    </div>
  </section>

  <!-- Header -->
  <header class="app-header" id="appHeader" hidden>
    <div class="brand">Avatly</div>
    <!-- (tabs nascosti su mobile; la bottom bar √® la navigazione principale) -->
    <nav class="tabs" aria-hidden="true">
      <button class="tab active" data-tab="outfit">Home</button>
      <button class="tab" data-tab="avatar">Avatar</button>
      <button class="tab" data-tab="wardrobe">Guardaroba</button>
      <button class="tab" data-tab="planner">Calendario</button>
      <button class="tab" data-tab="armocromia">Armocromia</button>
      <button class="tab" data-tab="settings">Impostazioni</button>
    </nav>

    <!-- Bolla meteo -->
    <div id="wxBubble" class="wx-bubble" hidden>
      <span id="wxEmoji">‚òÄÔ∏è</span>
      <span id="wxTemp">--¬∞</span>
    </div>
  </header>

  <main id="appMain" hidden>
    <!-- HOME = Outfit AI -->
    <section id="outfit" class="panel active">
      <div class="card">
        <h3>Outfit del giorno</h3>
        <div id="aiHint" class="muted small">
          Aggiungi qualche capo e attiva il meteo per consigli pi√π precisi.
        </div>
        <div class="inline" style="margin:8px 0">
          <button class="btn" id="useGPS">Usa la mia posizione</button>
          <input id="cityInput" placeholder="Citt√† (es. Roma, IT)"/>
          <button class="btn" id="setCity">Imposta</button>
        </div>
        <button class="btn primary" id="genOutfitsBtn">Genera 3 outfit</button>
        <div id="outfitList" class="grid-cards" style="margin-top:10px"></div>
        <button class="btn" id="exportOutfitBtn">Esporta outfit come immagine</button>
        <canvas id="exportCanvas" width="1200" height="1400" style="display:none"></canvas>
      </div>
    </section>

    <!-- Avatar -->
    <section id="avatar" class="panel">
      <div class="card">
        <h3>Il tuo Avatar</h3>
        <div class="inline">
          <div style="flex:1">
            <label>Altezza (cm)</label>
            <input id="avatarHeight" type="number" placeholder="es. 165">
          </div>
          <div style="flex:1">
            <label>Peso (kg)</label>
            <input id="avatarWeight" type="number" placeholder="es. 55">
          </div>
        </div>
        <div class="inline" style="margin-top:10px">
          <button class="btn primary" id="openAvatarCreator">Crea / Modifica avatar 3D</button>
          <button class="btn" id="saveAvatarMeasures">Salva misure</button>
        </div>
        <div id="avatarPreview" class="avatar-preview muted small" style="margin-top:10px">
          Nessun avatar salvato.
        </div>
      </div>
    </section>

    <!-- Guardaroba -->
    <section id="wardrobe" class="panel">
      <div class="grid-2">
        <div class="card">
          <h3>Aggiungi capo</h3>
          <label>Categoria</label>
          <div class="inline">
            <select id="newCategory"></select>
            <button class="btn" id="addCatBtn">+ nuova</button>
          </div>
          <label>Colore/Dettagli</label>
          <input id="newColor" placeholder="es. bianca, ricamata"/>
          <label>Foto (opzionale)</label>
          <input id="newPhoto" type="file" accept="image/*"/>
          <button class="btn primary" id="addItemBtn">Aggiungi al guardaroba</button>
          <p class="small muted">Tieni premuto su un capo per dettagli, modifica, sposta categoria o eliminare.</p>
        </div>

        <div class="card">
          <h3>Filtri rapidi</h3>
          <div class="filters">
            <aside class="filter-col">
              <div class="filter-title">Categorie</div>
              <div id="catList"></div>
            </aside>
            <div class="filter-body">
              <input id="searchTxt" placeholder="Cerca per colore/dettagli"/>
              <button class="btn" id="clearFilters">Pulisci filtri</button>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Il tuo guardaroba</h3>
        <div id="itemsGrid" class="grid-cards"></div>
      </div>
    </section>

    <!-- Planner -->
    <section id="planner" class="panel">
      <div class="card">
        <h3>Planner settimanale</h3>
        <div id="planGrid" class="plan-grid"></div>
        <div class="inline">
          <button class="btn" id="shareReminders">Esporta su Promemoria (testo)</button>
        </div>
      </div>
    </section>

    <!-- Armocromia -->
    <section id="armocromia" class="panel">
      <div class="card">
        <h3>Armocromia</h3>
        <p class="muted">Anteprima: qui salverai la tua palette e i suggerimenti per abbinamenti.</p>
      </div>
    </section>

    <!-- Impostazioni -->
    <section id="settings" class="panel">
      <div class="card">
        <h3>Profilo</h3>
        <label>Nome profilo</label>
        <input id="profileName" placeholder="Es. Marta"/>
        <div class="inline" style="margin-top:8px">
          <button class="btn primary" id="saveProfile">Salva</button>
          <button class="btn" id="logout">Esci</button>
        </div>
      </div>
      <div class="card">
        <h3>Backup</h3>
        <button class="btn" id="exportData">Esporta dati (.json)</button>
        <input type="file" id="importData" accept="application/json" hidden/>
        <button class="btn" id="importBtn">Importa dati</button>
      </div>
      <div class="card">
        <h3>Note roadmap</h3>
        <p class="small muted">Avatar realistico & Try-On AI nella v1.5 (premium).</p>
      </div>
    </section>
  </main>

  <!-- Bottom navigation -->
  <nav class="bottom-nav" id="bottomNav" hidden>
    <button data-go="outfit" class="bnav active" title="Home">üè†<span>Home</span></button>
    <button data-go="avatar" class="bnav" title="Avatar">üßç‚Äç‚ôÄÔ∏è<span>Avatar</span></button>
    <button data-go="wardrobe" class="bnav" title="Guardaroba">üëó<span>Vestiti</span></button>
    <button data-go="planner" class="bnav" title="Calendario">üìÖ<span>Planner</span></button>
    <button data-go="armocromia" class="bnav" title="Armocromia">üé®<span>Colori</span></button>
    <button data-go="settings" class="bnav" title="Impostazioni">‚öôÔ∏è<span>Impost.</span></button>
  </nav>

  <!-- Toast / mini-messaggi -->
  <div id="toast" class="toast" hidden></div>

  <!-- Modale Creator Avatar (Ready Player Me) -->
  <div id="rpmModal" class="modal" style="display:none">
    <div class="modal-inner">
      <div class="modal-bar">
        <strong>Creator Avatar</strong>
        <button class="icon-btn" id="closeRpm">‚úï</button>
      </div>
      <!-- Demo Hosted Creator Ready Player Me con Frame API -->
      <iframe id="rpmFrame" allow="camera *; microphone *"
        src="https://demo.readyplayer.me/avatar?frameApi=true"
        style="width:100%;height:100%;border:0;border-radius:0 0 14px 14px"></iframe>
    </div>
  </div>

  <footer class="app-footer" id="appFooter" hidden>¬© 2025 Avatly ‚Äì v0.3</footer>
  <script src="app.js"></script>
</body>
</html>
