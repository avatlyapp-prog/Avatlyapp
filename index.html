<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Avatly</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png" />
  <link rel="stylesheet" href="styles.css" />
  <!-- model-viewer (web component 3D) -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">Avatly</div>
    <button id="weatherBtn" class="weather-badge" aria-label="Meteo">☁️ 22°</button>
  </header>

  <main class="page">
    <!-- HERO + AVATAR 3D -->
    <section class="hero">
      <div class="av3d-wrap">
        <model-viewer id="av3d"
          src="assets/avatar.glb"
          ar ar-modes="webxr scene-viewer quick-look"
          camera-controls
          disable-zoom
          environment-image="neutral"
          exposure="1"
          shadow-intensity="0.6"
          style="width:100%;height:100%;background:transparent;">
        </model-viewer>
      </div>

      <p class="hint">
        Tocca <button id="openAvatar" class="link-gear" aria-label="Personalizza">⚙︎</button> per personalizzare
      </p>
    </section>
  </main>

  <!-- BOTTOM NAV -->
  <nav class="tabbar" role="navigation" aria-label="Sezioni">
    <button class="tab" data-tab="ai">
      <span class="t-ico">✚</span>
      <span class="t-lbl">AI</span>
    </button>
    <button class="tab" data-tab="armadio">
      <span class="t-ico">👗</span>
      <span class="t-lbl">Armadio</span>
    </button>
    <button class="tab active" data-tab="home">
      <span class="t-ico">🏠</span>
      <span class="t-lbl">Home</span>
    </button>
    <button class="tab" data-tab="cal">
      <span class="t-ico">🗓️</span>
      <span class="t-lbl">Calendario</span>
    </button>
    <button class="tab" data-tab="imp">
      <span class="t-ico">⚙️</span>
      <span class="t-lbl">Impostazioni</span>
    </button>
  </nav>

  <!-- MODALE: personalizza avatar -->
  <div id="avatarModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="avTitle">
    <div class="sheet">
      <h3 id="avTitle">Personalizza avatar</h3>

      <div class="form-row">
        <div>
          <label for="avHeight">Altezza (cm)</label>
          <input id="avHeight" type="number" inputmode="numeric" placeholder="es. 168">
        </div>
        <div>
          <label for="avWeight">Peso (kg)</label>
          <input id="avWeight" type="number" inputmode="numeric" placeholder="es. 58">
        </div>
      </div>

      <div class="form-row two">
        <div>
          <label for="avScaleY">Statura (scala Y)</label>
          <input id="avScaleY" type="range" min="0.85" max="1.15" step="0.01" value="1">
        </div>
        <div>
          <label for="avScaleX">Robustezza (scala X)</label>
          <input id="avScaleX" type="range" min="0.85" max="1.15" step="0.01" value="1">
        </div>
      </div>

      <div class="form-row one">
        <div>
          <label for="avShape">Forma</label>
          <select id="avShape">
            <option value="dritta">Dritta</option>
            <option value="clessidra">Clessidra</option>
            <option value="pera">Pera</option>
            <option value="mela">Mela</option>
          </select>
          <div class="helper">
            Oggi gli slider cambiano la scala del modello (anteprima visiva).  
            Con un modello 3D avanzato useremo parametri reali (morph targets).
          </div>
        </div>
      </div>

      <div class="actions">
        <button class="btn btn-ghost" id="avCancel">Annulla</button>
        <button class="btn btn-primary" id="avSave">Salva</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
